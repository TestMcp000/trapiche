# Admin Error Log â€” Spec

> Status: DRAFT  
> Last Updated: 2026-01-02  
> Scope: admin error log aggregation, UX, error codes, and export.

Background: this and the admin i18n toggle spec were previously drafted together; they were split to enforce single responsibility (see git history if needed).

See also:

- i18n toggle spec: [Admin i18n Toggle â€” Spec](admin-i18n-toggle-spec.md)
- Implemented behavior (SSoT): [`doc/SPEC.md`](../../SPEC.md)
- Constraints: [`ARCHITECTURE.md`](../../../ARCHITECTURE.md)
- Drift tracker: [`uiux_refactor.md`](../../../uiux_refactor.md)

---

## ä¸‰ã€éŒ¯èª¤æ—¥èªŒé¡¯ç¤ºåŠŸèƒ½

### 3.0 åˆ†éšæ®µå¯¦ä½œè¦åŠƒ

| Phase | ç¯„åœ | èªªæ˜ |
|-------|------|------|
| **Phase 1** | Server Action éŒ¯èª¤ + Toast + Panel åŸºæœ¬åŠŸèƒ½ | æ ¸å¿ƒåƒ¹å€¼ï¼Œæœ€å¿«è¦‹æ•ˆ |
| **Phase 2** | ç¯©é¸/æœå°‹/åŒ¯å‡º JSON | é€²éšåŠŸèƒ½ |
| **Phase 3** | API Route / ç¶²è·¯éŒ¯èª¤æ””æˆªã€è·¨åˆ†é åŒæ­¥ | è¦–éœ€æ±‚å†æ±ºå®š |

> **æœ¬è¦æ ¼æ›¸ä»¥ Phase 1 ç‚ºä¸»**ï¼ŒPhase 2/3 åŠŸèƒ½æ¨™è¨»ç‚ºã€ŒPhase 2ã€æˆ–ã€ŒPhase 3ã€

---

### 3.1 åŠŸèƒ½ç›®æ¨™èˆ‡è¨­è¨ˆåŸå‰‡

#### 3.1.1 æ ¸å¿ƒç›®æ¨™

ç•¶å¾Œå°ä»»ä½•æ“ä½œå¤±æ•—æ™‚ï¼Œåœ¨ä»‹é¢ä¸Šå³æ™‚é¡¯ç¤ºçµæ§‹åŒ–çš„éŒ¯èª¤è³‡è¨Šï¼Œæä¾›è¶³å¤ çš„ Context è®“ç®¡ç†å“¡èƒ½ï¼š

1. **å¿«é€Ÿç†è§£å•é¡Œ** â€” ä¸€çœ¼çœ‹å‡ºå“ªå€‹æ“ä½œå¤±æ•—ã€ç‚ºä»€éº¼å¤±æ•—
2. **æœ‰æ•ˆ Debug** â€” æä¾›æŠ€è¡“ç´°ç¯€ï¼ˆAction åç¨±ã€Target IDã€æ™‚é–“æˆ³è¨˜ç­‰ï¼‰
3. **æ–¹ä¾¿å›å ±** â€” ä¸€éµè¤‡è£½å®Œæ•´éŒ¯èª¤è³‡è¨Šï¼Œä¾¿æ–¼æäº¤ Issue æˆ–å›å ±é–‹ç™¼è€…

#### 3.1.2 è¨­è¨ˆåŸå‰‡

| åŸå‰‡ | èªªæ˜ |
|------|------|
| éé˜»å¡å¼ | éŒ¯èª¤é¡¯ç¤ºä¸é˜»æ“‹ä½¿ç”¨è€…ç¹¼çºŒæ“ä½œ |
| è³‡è¨Šåˆ†å±¤ | Toast é¡¯ç¤ºæ‘˜è¦ï¼ŒPanel æä¾›å®Œæ•´ç´°ç¯€ |
| å®‰å…¨å„ªå…ˆ | ä¸é¡¯ç¤ºæ•æ„Ÿè³‡è¨Šï¼ˆå¦‚å®Œæ•´ Stack traceã€å…§éƒ¨ IPï¼‰ |
| å¯è¿½æº¯ | æ¯å‰‡éŒ¯èª¤æœ‰å”¯ä¸€è­˜åˆ¥ç¢¼ï¼Œä¾¿æ–¼è¿½è¹¤ |
| é›™èªæ”¯æ´ | éŒ¯èª¤è¨Šæ¯ä¾ç•¶å‰å¾Œå°èªè¨€é¡¯ç¤º |

#### 3.1.3 æ˜ç¢ºæ’é™¤ï¼ˆPhase 1 ä¸è™•ç†ï¼‰

| é …ç›® | ç†ç”± |
|------|------|
| Success Log | ç›®çš„æ˜¯ Debugï¼ŒæˆåŠŸæ“ä½œç„¡éœ€è¨˜éŒ„ï¼›è‹¥éœ€å¯©è¨ˆåŠŸèƒ½æ‡‰èµ° `admin_history` è¡¨ |
| `window.onerror` æ””æˆª | ç¬¬ä¸‰æ–¹å¥—ä»¶éŒ¯èª¤å¤ªé›œï¼Œæ˜“èª¤å ± |
| API Route éŒ¯èª¤ | å¯¦ä½œæˆæœ¬é«˜ï¼ŒServer Action å·²æ¶µè“‹ 95% å¾Œå°æ“ä½œ |
| ç¶²è·¯éŒ¯èª¤ | å¯¦ä½œæˆæœ¬é«˜ï¼ŒPhase 3 å†è©•ä¼° |
| Server Component éŒ¯èª¤ | æ‡‰é¡¯ç¤º Error Boundary æˆ– redirectï¼Œä¸é©åˆ Toast å½¢å¼ |
| è·¨åˆ†é åŒæ­¥ | sessionStorage æœ¬èº«ä¸è·¨åˆ†é ï¼›BroadcastChannel æˆæœ¬é«˜ï¼Œéœ€æ±‚ä¸æ˜ç¢º |

---

### 3.2 éŒ¯èª¤è³‡æ–™çµæ§‹

#### 3.2.1 ErrorLogEntry å®šç¾©

æ¯å‰‡éŒ¯èª¤æ—¥èªŒæ‡‰åŒ…å«ä»¥ä¸‹çµæ§‹åŒ–æ¬„ä½ï¼š

| æ¬„ä½åç¨± | é¡å‹ | å¿…å¡« | èªªæ˜ |
|---------|------|:----:|------|
| `id` | string | âœ“ | å”¯ä¸€è­˜åˆ¥ç¢¼ï¼ˆUUID æ ¼å¼ï¼‰ |
| `timestamp` | ISO 8601 string | âœ“ | éŒ¯èª¤ç™¼ç”Ÿçš„ç²¾ç¢ºæ™‚é–“ |
| `errorCode` | ActionErrorCode \| `'unknown_error'` | âœ“ | ç³»çµ±å®šç¾©çš„éŒ¯èª¤ä»£ç¢¼ï¼ˆlegacy actions fallback: `unknown_error`ï¼‰ |
| `severity` | 'critical' \| 'error' \| 'warning' | âœ“ | åš´é‡ç¨‹åº¦ç­‰ç´š |
| `module` | string | âœ“ | ä¾†æºæ¨¡çµ„ï¼ˆå¦‚ 'Blog', 'Shop'ï¼‰ |
| `subModule` | string | | å­æ¨¡çµ„ï¼ˆå¦‚ 'Posts', 'Products'ï¼‰ |
| `action` | string | âœ“ | è§¸ç™¼éŒ¯èª¤çš„ Action åç¨± |
| `targetType` | string | | æ“ä½œå°è±¡é¡å‹ï¼ˆå¦‚ 'post', 'product'ï¼‰ |
| `targetId` | string | | æ“ä½œå°è±¡ ID |
| `targetName` | string | | æ“ä½œå°è±¡åç¨±ï¼ˆå¦‚æ–‡ç« æ¨™é¡Œï¼Œæ–¹ä¾¿è­˜åˆ¥ï¼‰ |
| `userEmail` | string | | ç•¶å‰ç™»å…¥çš„ç®¡ç†å“¡ Email |
| `locale` | 'en' \| 'zh' | âœ“ | éŒ¯èª¤ç™¼ç”Ÿæ™‚çš„ä»‹é¢èªè¨€ |
| `url` | string | âœ“ | éŒ¯èª¤ç™¼ç”Ÿæ™‚çš„é é¢ URL |
| `inputSummary` | object | | è¼¸å…¥è³‡æ–™æ‘˜è¦ï¼ˆè„«æ•å¾Œï¼‰ |
| `additionalInfo` | object | | å…¶ä»–ç›¸é—œè³‡è¨Š |
| `isRead` | boolean | âœ“ | æ˜¯å¦å·²è®€ï¼ˆç”¨æ–¼ badge è¨ˆæ•¸ï¼‰ |

#### 3.2.2 ç¯„ä¾‹è³‡æ–™

```
{
  "id": "err_20260101_143045_abc123",
  "timestamp": "2026-01-01T14:30:45.123Z",
  "errorCode": "update_failed",
  "severity": "error",
  "module": "Blog",
  "subModule": "Posts",
  "action": "updatePostAction",
  "targetType": "post",
  "targetId": "post_abc123",
  "targetName": "æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ",
  "userEmail": "admin@example.com",
  "locale": "zh",
  "url": "/zh/admin/posts/post_abc123/edit",
  "inputSummary": {
    "title_zh": "æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼ˆå·²æ›´æ–°ï¼‰",
    "slug": "my-first-post",
    "visibility": "published"
  },
  "additionalInfo": {
    "previousSlug": "my-first-post-old",
    "attemptCount": 1
  },
  "isRead": false
}
```

---

### 3.3 éŒ¯èª¤ä¾†æºèˆ‡è§¸ç™¼æ©Ÿåˆ¶

#### 3.3.1 éŒ¯èª¤ä¾†æºåˆ†é¡

| ä¾†æºé¡å‹ | èªªæ˜ | è§¸ç™¼æ¢ä»¶ | Phase |
|---------|------|---------|:-----:|
| **Server Action éŒ¯èª¤** | å¾Œå° CRUD æ“ä½œå¤±æ•— | `ActionResult.success === false` | 1 |
| **API Route éŒ¯èª¤** | é Action çš„ API å‘¼å«å¤±æ•— | Response status >= 400 | 3 |
| **Client ç«¯éŒ¯èª¤** | å‰ç«¯ JavaScript éŒ¯èª¤ | Error Boundary | 3 |
| **ç¶²è·¯éŒ¯èª¤** | è«‹æ±‚é€¾æ™‚æˆ–ç¶²è·¯ä¸­æ–· | fetch å¤±æ•—ã€timeout | 3 |

> **Phase 1 åƒ…è™•ç† Server Action éŒ¯èª¤**ï¼Œæ¶µè“‹ 95% å¾Œå°æ“ä½œ

#### 3.3.2 Server Action éŒ¯èª¤æ””æˆª

é‡å°ç¾æœ‰çš„ Server Action æ¶æ§‹ï¼Œéœ€å»ºç«‹çµ±ä¸€çš„éŒ¯èª¤æ””æˆªæ©Ÿåˆ¶ï¼š

**æ””æˆªé»ä½ç½®ï¼š**
- Client Component å‘¼å« Server Action å¾Œçš„å›å‚³è™•ç†
- ä¸ä¿®æ”¹ç¾æœ‰ Server Action çš„å›å‚³æ ¼å¼

**æ””æˆªæµç¨‹ï¼š**

```
1. Client Component å‘¼å« Server Action
2. Server Action å›å‚³ ActionResult
3. Client ç«¯æª¢æŸ¥ result.success
4. è‹¥ success === falseï¼š
   a. å¾ Context æ”¶é›†éŒ¯èª¤ç›¸é—œè³‡è¨Š
   b. å»ºç«‹ ErrorLogEntry
   c. å‘¼å« ErrorLogService.add(entry)
   d. è§¸ç™¼ Toast é¡¯ç¤º
   e. æ›´æ–° Error Log Panel badge
5. ç¹¼çºŒåŸæœ‰çš„éŒ¯èª¤è™•ç†é‚è¼¯ï¼ˆå¦‚é¡¯ç¤ºè¡¨å–®éŒ¯èª¤æç¤ºï¼‰
```

#### 3.3.3 éœ€æ””æˆªçš„ Server Actionsï¼ˆä¾æ¨¡çµ„åˆ†é¡ï¼‰

| æ¨¡çµ„ | æª”æ¡ˆä½ç½® | Actions |
|------|---------|---------|
| **Blog** | `admin/(blog)/posts/actions.ts` | createPostAction, updatePostAction, deletePostAction |
| | `admin/(blog)/categories/actions.ts` | createCategory, updateCategory, deleteCategory |
| | `admin/(blog)/comments/actions.ts` | approveComment, rejectComment, deleteComment |
| **Shop** | `admin/shop/products/actions.ts` | createProduct, updateProduct, deleteProduct |
| | `admin/shop/orders/actions.ts` | updateOrderStatus, refundOrder |
| | `admin/shop/coupons/actions.ts` | createCoupon, updateCoupon, deleteCoupon |
| **Gallery** | `admin/gallery/actions.ts` | uploadGalleryItem, deleteGalleryItem, updateGalleryItem |
| | `admin/gallery/categories/actions.ts` | createGalleryCategory, deleteGalleryCategory |
| **Data** | `admin/(data)/embeddings/actions.ts` | initializeAllEmbeddingsAction, retryFailedEmbeddingsAction |
| | `admin/(data)/preprocessing/actions.ts` | updatePreprocessingConfig |
| | `admin/(data)/ai-analysis/actions.ts` | generateAIReport |
| **Settings** | `admin/settings/actions.ts` | updateSiteSettings |
| | `admin/theme/actions.ts` | updateTheme, updateFonts |
| **Users** | `admin/users/actions.ts` | updateUserRole, updateUserNotes |

---

### 3.4 Toast å³æ™‚é€šçŸ¥

#### 3.4.1 è§¸ç™¼èˆ‡é¡¯ç¤ºè¦å‰‡

| é …ç›® | è¦æ ¼ |
|------|------|
| è§¸ç™¼æ™‚æ©Ÿ | éŒ¯èª¤è¢«è¨˜éŒ„è‡³ ErrorLogService æ™‚è‡ªå‹•è§¸ç™¼ |
| é¡¯ç¤ºä½ç½® | ç•«é¢å³ä¸‹è§’ï¼Œè·é›¢é‚Šç·£ 16px |
| é¡¯ç¤ºæ™‚é•· | Critical: ä¸è‡ªå‹•æ¶ˆå¤± / Error: 10 ç§’ / Warning: 6 ç§’ |
| å †ç–Šæ–¹å¼ | å‚ç›´å‘ä¸Šå †ç–Šï¼Œæœ€æ–°çš„åœ¨æœ€ä¸‹æ–¹ |
| æœ€å¤§æ•¸é‡ | åŒæ™‚æœ€å¤šé¡¯ç¤º 5 å‰‡ |
| æº¢å‡ºè™•ç† | è¶…é 5 å‰‡æ™‚ï¼Œæœ€èˆŠçš„ Toast ç«‹å³æ¶ˆå¤± |

#### 3.4.2 Toast å…§å®¹çµæ§‹

**ç°¡æ½”æ¨¡å¼ï¼ˆé è¨­ï¼‰ï¼š**

| å€åŸŸ | å…§å®¹ | ç¯„ä¾‹ |
|------|------|------|
| æ¨™é¡Œåˆ— | åš´é‡åº¦åœ–ç¤º + æœ¬åœ°æ™‚é–“ + é—œé–‰æŒ‰éˆ• | ğŸ”´ 14:30:45 âœ• |
| ä¸»è¨Šæ¯ | é›™èªéŒ¯èª¤è¨Šæ¯ | æ›´æ–°æ–‡ç« å¤±æ•— |
| éŒ¯èª¤ä»£ç¢¼ | éŒ¯èª¤ä»£ç¢¼ï¼ˆç­‰å¯¬å­—é«”ï¼›é¡¯ç¤ºå±¤å¯åš `toUpperCase()`ï¼‰ | `update_failed` |
| ä¾†æºè·¯å¾‘ | æ¨¡çµ„ â€º å­æ¨¡çµ„ â€º æ“ä½œ | Blog â€º Posts â€º Edit |
| æ“ä½œå€ | å±•é–‹è©³æƒ… / è¤‡è£½ / æŸ¥çœ‹æ—¥èªŒ | [è©³æƒ…] [è¤‡è£½] [æŸ¥çœ‹æ—¥èªŒ] |

**å±•é–‹æ¨¡å¼ï¼ˆé»æ“Šã€Œè©³æƒ…ã€å¾Œï¼‰ï¼š**

åœ¨ç°¡æ½”æ¨¡å¼åŸºç¤ä¸Šï¼Œé¡å¤–é¡¯ç¤ºï¼š

| å€åŸŸ | å…§å®¹ |
|------|------|
| æ“ä½œå°è±¡ | Target: post_abc123 (æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ) |
| Action åç¨± | Action: updatePostAction |
| å®Œæ•´ URL | URL: /zh/admin/posts/post_abc123/edit |

#### 3.4.3 Toast è¦–è¦ºè¨­è¨ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”´ 14:30:45                             âœ• â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ›´æ–°æ–‡ç« å¤±æ•—                               â”‚
â”‚                                            â”‚
â”‚ update_failed                              â”‚
â”‚ Blog â€º Posts â€º Edit                        â”‚
â”‚                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â–¼ è©³ç´°è³‡è¨Š                             â”‚ â”‚
â”‚ â”‚   Target: post_abc123                  â”‚ â”‚
â”‚ â”‚   Name: æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç«                  â”‚ â”‚
â”‚ â”‚   Action: updatePostAction             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                            â”‚
â”‚                      [è¤‡è£½] [æŸ¥çœ‹æ—¥èªŒ]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.4.4 Toast äº’å‹•è¡Œç‚º

| äº’å‹• | è¡Œç‚º |
|------|------|
| é»æ“Šé—œé–‰æŒ‰éˆ• | ç«‹å³é—œé–‰è©² Toast |
| é»æ“Šã€Œè©³æƒ…ã€ | å±•é–‹/æ”¶åˆè©³ç´°è³‡è¨Šå€å¡Š |
| é»æ“Šã€Œè¤‡è£½ã€ | è¤‡è£½è©²éŒ¯èª¤çš„å®Œæ•´è³‡è¨Šè‡³å‰ªè²¼ç°¿ï¼Œé¡¯ç¤ºè¼•é‡ tooltipã€Œå·²è¤‡è£½ã€2 ç§’å¾Œæ¶ˆå¤± |
| é»æ“Šã€ŒæŸ¥çœ‹æ—¥èªŒã€ | é–‹å•Ÿ Error Log Panel |
| æ»‘é¼ æ‡¸åœ | æš«åœè‡ªå‹•æ¶ˆå¤±å€’æ•¸è¨ˆæ™‚ |
| æ»‘é¼ é›¢é–‹ | æ¢å¾©è‡ªå‹•æ¶ˆå¤±å€’æ•¸è¨ˆæ™‚ |
| å‘å³æ»‘å‹•ï¼ˆè¡Œå‹•ç‰ˆï¼‰ | é—œé–‰è©² Toast |

> **å‘½åæ±ºç­–**ï¼šToast ç”¨ã€ŒæŸ¥çœ‹æ—¥èªŒã€ï¼ŒPanel åº•éƒ¨ç”¨ã€Œè¤‡è£½å…¨éƒ¨ã€ï¼Œèªæ„æ›´æ¸…æ¥š

---

### 3.5 Error Log Panel

#### 3.5.1 é¢æ¿åŸºæœ¬è¦æ ¼

| é …ç›® | è¦æ ¼ |
|------|------|
| å…¥å£ä½ç½® | AdminSidebar åº•éƒ¨ï¼Œç™»å‡ºæŒ‰éˆ•ä¸Šæ–¹ |
| å…¥å£æ¨£å¼ | åœ–ç¤ºæŒ‰éˆ•ï¼ˆBug æˆ– Warning åœ–ç¤ºï¼‰+ æœªè®€ Badge |
| é¡¯ç¤ºæ–¹å¼ | å¾å³å´æ»‘å…¥çš„ Drawer é¢æ¿ |
| é¢æ¿å¯¬åº¦ | æ¡Œé¢ç‰ˆ 450px / å¹³æ¿ 400px / è¡Œå‹•è£ç½®å…¨è¢å¹• |
| èƒŒæ™¯é®ç½© | åŠé€æ˜é»‘è‰²é®ç½©ï¼Œé»æ“Šå¯é—œé–‰é¢æ¿ |
| é—œé–‰æ–¹å¼ | é»æ“Šé®ç½© / é»æ“Šé—œé–‰æŒ‰éˆ• / æŒ‰ ESC éµ |

#### 3.5.2 é¢æ¿çµæ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Error Log                            [âœ•]   â”‚
â”‚ 3 å‰‡æœªè®€ Â· å…± 12 å‰‡                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ” æœå°‹éŒ¯èª¤è¨Šæ¯æˆ–ä»£ç¢¼...               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚ [å…¨éƒ¨â–¼] [å…¨éƒ¨ç­‰ç´šâ–¼] [å…¨éƒ¨æ¨¡çµ„â–¼]  [æ¸…é™¤å…¨éƒ¨] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚ â”Œâ”€ ä»Šå¤© â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                         â”‚ â”‚
â”‚ â”‚ ğŸ”´ 14:30:45 Â· update_failed       [Â·Â·Â·]â”‚ â”‚
â”‚ â”‚    æ›´æ–°æ–‡ç« å¤±æ•—                         â”‚ â”‚
â”‚ â”‚    Blog â€º Posts                         â”‚ â”‚
â”‚ â”‚    post_abc123                          â”‚ â”‚
â”‚ â”‚                                         â”‚ â”‚
â”‚ â”‚ ğŸŸ  14:25:12 Â· validation_error    [Â·Â·Â·]â”‚ â”‚
â”‚ â”‚    è¼¸å…¥æ ¼å¼éŒ¯èª¤                         â”‚ â”‚
â”‚ â”‚    Shop â€º Products                      â”‚ â”‚
â”‚ â”‚    product_xyz789                       â”‚ â”‚
â”‚ â”‚                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚ â”Œâ”€ æ˜¨å¤© â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                         â”‚ â”‚
â”‚ â”‚ ğŸŸ¡ 09:15:33 Â· rate_limited        [Â·Â·Â·]â”‚ â”‚
â”‚ â”‚    è«‹æ±‚éæ–¼é »ç¹                         â”‚ â”‚
â”‚ â”‚    Data â€º Embeddings                    â”‚ â”‚
â”‚ â”‚                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [è¤‡è£½å…¨éƒ¨ï¼ˆ12 å‰‡ï¼‰]              [åŒ¯å‡º JSON] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.5.3 ç¯©é¸åŠŸèƒ½ **(Phase 2)**

> Phase 1 ä¸å¯¦ä½œç¯©é¸åŠŸèƒ½ï¼Œåƒ…é¡¯ç¤ºå…¨éƒ¨éŒ¯èª¤åˆ—è¡¨

**æ™‚é–“ç¯©é¸ï¼š**

| é¸é … | èªªæ˜ |
|------|------|
| å…¨éƒ¨ | é¡¯ç¤ºæ‰€æœ‰è¨˜éŒ„ï¼ˆæœ€å¤š 100 å‰‡ï¼‰ |
| æœ€è¿‘ 1 å°æ™‚ | éå» 60 åˆ†é˜å…§ |
| ä»Šå¤© | ä»Šæ—¥ 00:00 è‡³ä»Š |
| æ˜¨å¤© | æ˜¨æ—¥ 00:00 - 23:59 |
| æœ€è¿‘ 7 å¤© | éå» 7 å¤©å…§ |

**ç­‰ç´šç¯©é¸ï¼š**

| é¸é … | åŒ…å«çš„ç­‰ç´š |
|------|-----------|
| å…¨éƒ¨ç­‰ç´š | Critical + Error + Warning |
| Critical | åƒ… Critical |
| Error | åƒ… Error |
| Warning | åƒ… Warning |
| Error ä»¥ä¸Š | Critical + Error |

**æ¨¡çµ„ç¯©é¸ï¼š**

| é¸é … | èªªæ˜ |
|------|------|
| å…¨éƒ¨æ¨¡çµ„ | æ‰€æœ‰æ¨¡çµ„ |
| Blog | æ–‡ç« ã€åˆ†é¡ã€ç•™è¨€ |
| Shop | å•†å“ã€è¨‚å–®ã€å„ªæƒ åˆ¸ã€æœƒå“¡ |
| Gallery | åœ–å»Šã€åœ–å»Šåˆ†é¡ |
| Data | Embeddingã€Preprocessingã€AI Analysis |
| Settings | ç¶²ç«™è¨­å®šã€ä¸»é¡Œã€åŠŸèƒ½é–‹é—œ |
| Users | ç”¨æˆ¶ç®¡ç† |
| Content | å…§å®¹ç·¨è¼¯ã€Landing Page |

**æœå°‹åŠŸèƒ½ (Phase 2)ï¼š**

| é …ç›® | è¦æ ¼ |
|------|------|
| æœå°‹æ–¹å¼ | Case-insensitive substring match |
| æœå°‹ç¯„åœ | éŒ¯èª¤è¨Šæ¯ã€éŒ¯èª¤ä»£ç¢¼ã€Target ID |

#### 3.5.4 éŒ¯èª¤é …ç›®å±•é–‹è©³æƒ…

é»æ“Šå–®å‰‡éŒ¯èª¤å¯å±•é–‹å®Œæ•´è³‡è¨Šï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”´ update_failed                      [â–²]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ™‚é–“      2026-01-01 14:30:45 (3 åˆ†é˜å‰)   â”‚
â”‚ ç­‰ç´š      Error                             â”‚
â”‚ æ¨¡çµ„      Blog â€º Posts â€º Edit               â”‚
â”‚ è¨Šæ¯      æ›´æ–°æ–‡ç« å¤±æ•—                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ“ä½œè©³æƒ…                                    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€                                   â”‚
â”‚ Action    updatePostAction                  â”‚
â”‚ Target    post (post_abc123)                â”‚
â”‚ Name      æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç«                     â”‚
â”‚ User      admin@example.com                 â”‚
â”‚ URL       /zh/admin/posts/post_abc123/edit  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¼¸å…¥æ‘˜è¦                                    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€                                   â”‚
â”‚ title_zh    "æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼ˆå·²æ›´æ–°ï¼‰"      â”‚
â”‚ slug        "my-first-post"                 â”‚
â”‚ visibility  "published"                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ éŒ¯èª¤ ID   err_20260101_143045_abc123        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [è¤‡è£½æ­¤éŒ¯èª¤]                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **æ±ºç­–èªªæ˜**ï¼šã€Œæ¨™è¨˜ç‚ºå·²è®€ã€æ”¹ç‚º**å±•é–‹è©³æƒ…æ™‚è‡ªå‹•æ¨™è¨˜**ï¼Œæ¸›å°‘é»æ“Šæ­¥é©Ÿï¼›ä½¿ç”¨è€…å±•é–‹å³è¡¨ç¤ºå·²çœ‹é

#### 3.5.5 ç©ºç‹€æ…‹

ç•¶æ²’æœ‰ä»»ä½•éŒ¯èª¤è¨˜éŒ„æ™‚ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                             â”‚
â”‚              âœ“                              â”‚
â”‚                                             â”‚
â”‚         ç›®å‰æ²’æœ‰éŒ¯èª¤è¨˜éŒ„                    â”‚
â”‚                                             â”‚
â”‚    æ‰€æœ‰æ“ä½œéƒ½æ­£å¸¸é‹ä½œä¸­                     â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ç•¶ç¯©é¸çµæœç‚ºç©ºæ™‚ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                             â”‚
â”‚         æ‰¾ä¸åˆ°ç¬¦åˆæ¢ä»¶çš„éŒ¯èª¤                â”‚
â”‚                                             â”‚
â”‚    å˜—è©¦èª¿æ•´ç¯©é¸æ¢ä»¶æˆ–æœå°‹é—œéµå­—            â”‚
â”‚                                             â”‚
â”‚              [æ¸…é™¤ç¯©é¸]                     â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.6 éŒ¯èª¤åˆ†ç´šç³»çµ±

#### 3.6.1 åˆ†ç´šå®šç¾©

| ç­‰ç´š | ä»£ç¢¼ | è¦–è¦º | è‡ªå‹•æ¶ˆå¤± | é©ç”¨æƒ…å¢ƒ |
|------|------|------|:--------:|---------|
| **Critical** | `critical` | ğŸ”´ ç´…è‰² | å¦ | ç³»çµ±å±¤ç´šéŒ¯èª¤ï¼Œéœ€ç«‹å³è™•ç† |
| **Error** | `error` | ğŸŸ  æ©˜è‰² | 10 ç§’ | æ“ä½œå¤±æ•—ï¼Œä½†ä¸å½±éŸ¿ç³»çµ±ç©©å®š |
| **Warning** | `warning` | ğŸŸ¡ é»ƒè‰² | 6 ç§’ | éé æœŸç‹€æ…‹ï¼Œå»ºè­°é—œæ³¨ |

#### 3.6.2 éŒ¯èª¤ä»£ç¢¼èˆ‡ç­‰ç´šå°æ‡‰

| éŒ¯èª¤ä»£ç¢¼ | ç­‰ç´š | èªªæ˜ |
|---------|------|------|
| `internal_error` | Critical | ç³»çµ±å…§éƒ¨éŒ¯èª¤ |
| `unauthorized` | Critical | æœªæˆæ¬Šå­˜å– |
| `forbidden` | Critical | æ¬Šé™ä¸è¶³ |
| `owner_required` | Critical | éœ€è¦ Owner æ¬Šé™ |
| `not_found` | Error | è³‡æºä¸å­˜åœ¨ |
| `create_failed` | Error | å»ºç«‹æ“ä½œå¤±æ•— |
| `update_failed` | Error | æ›´æ–°æ“ä½œå¤±æ•— |
| `delete_failed` | Error | åˆªé™¤æ“ä½œå¤±æ•— |
| `validation_error` | Error | è¼¸å…¥é©—è­‰å¤±æ•— |
| `slug_duplicate` | Error | Slug é‡è¤‡ |
| `category_has_posts` | Error | åˆ†é¡ä¸‹æœ‰æ–‡ç«  |
| `resource_in_use` | Error | è³‡æºä½¿ç”¨ä¸­ |
| `feature_disabled` | Warning | åŠŸèƒ½å·²åœç”¨ |
| `rate_limited` | Warning | è«‹æ±‚é »ç‡é™åˆ¶ |
| `out_of_stock` | Warning | å•†å“ç¼ºè²¨ |
| `unknown_error` | Error | æœªæ¨™æº–åŒ–éŒ¯èª¤ï¼ˆlegacy `{ success: false, error: string }` fallbackï¼‰ |

#### 3.6.3 ç­‰ç´šåˆ¤å®šé‚è¼¯

```
åˆ¤å®šé †åºï¼ˆç”±é«˜è‡³ä½ï¼‰ï¼š

1. æª¢æŸ¥æ˜¯å¦ç‚ºå·²çŸ¥çš„ Critical ä»£ç¢¼ â†’ å›å‚³ Critical
2. æª¢æŸ¥æ˜¯å¦ç‚ºå·²çŸ¥çš„ Warning ä»£ç¢¼ â†’ å›å‚³ Warning
3. å…¶é¤˜æƒ…æ³ â†’ å›å‚³ Errorï¼ˆé è¨­ï¼‰
```

---

### 3.7 Context è³‡è¨Šæ”¶é›†

#### 3.7.1 è‡ªå‹•æ”¶é›†çš„è³‡è¨Š

ä»¥ä¸‹è³‡è¨Šæ‡‰åœ¨éŒ¯èª¤ç™¼ç”Ÿæ™‚è‡ªå‹•æ”¶é›†ï¼Œç„¡éœ€æ‰‹å‹•å‚³å…¥ï¼š

| è³‡è¨Š | ä¾†æº | èªªæ˜ |
|------|------|------|
| `timestamp` | `new Date().toISOString()` | ç²¾ç¢ºè‡³æ¯«ç§’ï¼ˆå„²å­˜ UTCï¼›é¡¯ç¤ºæ™‚è½‰ç‚ºæœ¬åœ°æ™‚é–“ï¼‰ |
| `userEmail` | Auth Context / Session | ç•¶å‰ç™»å…¥ä½¿ç”¨è€… |
| `locale` | i18n Context | ç•¶å‰ä»‹é¢èªè¨€ |
| `url` | `window.location.pathname` | ç•¶å‰é é¢è·¯å¾‘ |
| `module` | Router path parsing | å¾ URL è§£ææ¨¡çµ„åç¨± |
| `subModule` | Router path parsing | å¾ URL è§£æå­æ¨¡çµ„åç¨± |

#### 3.7.2 éœ€ç”±å‘¼å«ç«¯æä¾›çš„è³‡è¨Š

| è³‡è¨Š | å¿…å¡« | èªªæ˜ |
|------|:----:|------|
| `errorCode` | âœ“ | ä¾†è‡ª ActionResult |
| `action` | âœ“ | Server Action åç¨± |
| `targetType` | | æ“ä½œå°è±¡é¡å‹ |
| `targetId` | | æ“ä½œå°è±¡ ID |
| `targetName` | | æ“ä½œå°è±¡é¡¯ç¤ºåç¨± |
| `inputSummary` | | è¼¸å…¥è³‡æ–™æ‘˜è¦ï¼ˆè„«æ•ï¼‰ |

#### 3.7.3 æ¨¡çµ„è·¯å¾‘è§£æè¦å‰‡

| URL Pattern | è§£æçµæœ |
|-------------|---------|
| `/admin/posts/*` | module: Blog, subModule: Posts |
| `/admin/categories/*` | module: Blog, subModule: Categories |
| `/admin/comments/*` | module: Blog, subModule: Comments |
| `/admin/shop/products/*` | module: Shop, subModule: Products |
| `/admin/shop/orders/*` | module: Shop, subModule: Orders |
| `/admin/gallery/*` | module: Gallery |
| `/admin/embeddings/*` | module: Data, subModule: Embeddings |
| `/admin/preprocessing/*` | module: Data, subModule: Preprocessing |
| `/admin/settings/*` | module: Settings |
| `/admin/users/*` | module: Users |

#### 3.7.4 è¼¸å…¥è³‡æ–™è„«æ•è¦å‰‡

è¤‡è£½æˆ–é¡¯ç¤º inputSummary å‰ï¼Œéœ€å°æ•æ„Ÿæ¬„ä½è„«æ•ï¼š

| æ¬„ä½é¡å‹ | è„«æ•æ–¹å¼ | ç¯„ä¾‹ |
|---------|---------|------|
| password / secret | å®Œå…¨éš±è— | `"***"` |
| email | éƒ¨åˆ†éš±è— | `"adm***@example.com"` |
| é•·æ–‡å­— (>100 å­—å…ƒ) | æˆªæ–· | `"å…§å®¹æ‘˜è¦..."` |
| API Key | åƒ…é¡¯ç¤ºå‰å¾Œ 4 å­—å…ƒ | `"sk-a...xyz"` |

---

### 3.8 è¤‡è£½èˆ‡åŒ¯å‡ºåŠŸèƒ½

#### 3.8.1 å–®å‰‡éŒ¯èª¤è¤‡è£½æ ¼å¼

é»æ“Šã€Œè¤‡è£½ã€æŒ‰éˆ•æ™‚ï¼Œè¤‡è£½ä»¥ä¸‹æ ¼å¼çš„ç´”æ–‡å­—ï¼š

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ERROR REPORT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Error ID:    err_20260101_143045_abc123
Timestamp:   2026-01-01 14:30:45
Severity:    Error
Code:        update_failed
Message:     æ›´æ–°æ–‡ç« å¤±æ•— / Failed to update

Module:      Blog â€º Posts â€º Edit
Action:      updatePostAction
Target:      post (post_abc123)
Target Name: æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« 
User:        admin@example.com
URL:         /zh/admin/posts/post_abc123/edit

Input Summary:
  title_zh:    "æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼ˆå·²æ›´æ–°ï¼‰"
  slug:        "my-first-post"
  visibility:  "published"
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

#### 3.8.2 æ‰¹æ¬¡è¤‡è£½æ ¼å¼

è¤‡è£½å¤šå‰‡éŒ¯èª¤æ™‚ï¼Œä»¥æ›è¡Œåˆ†éš”ï¼Œä¸¦åŠ ä¸Šæ‘˜è¦æ¨™é¡Œï¼š

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ERROR LOG EXPORT
Generated:   2026-01-01 15:00:00
Total:       3 errors
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

--- Error 1/3 ---
[å–®å‰‡éŒ¯èª¤å…§å®¹...]

--- Error 2/3 ---
[å–®å‰‡éŒ¯èª¤å…§å®¹...]

--- Error 3/3 ---
[å–®å‰‡éŒ¯èª¤å…§å®¹...]

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

#### 3.8.3 JSON åŒ¯å‡ºæ ¼å¼ **(Phase 2)**

é»æ“Šã€ŒåŒ¯å‡º JSONã€æ™‚ï¼Œä¸‹è¼‰ JSON æª”æ¡ˆï¼š

```
{
  "exportInfo": {
    "generatedAt": "2026-01-01T15:00:00.000Z",
    "totalErrors": 3,
    "filters": {
      "timeRange": "today",
      "severity": "all",
      "module": "all"
    }
  },
  "errors": [
    {
      "id": "err_20260101_143045_abc123",
      "timestamp": "2026-01-01T14:30:45.123Z",
      "errorCode": "update_failed",
      "severity": "error",
      ...å®Œæ•´ ErrorLogEntry çµæ§‹
    },
    ...
  ]
}
```

æª”åæ ¼å¼ï¼š`error-log-{YYYYMMDD}-{HHmmss}.json`

---

### 3.9 èˆ‡ç¾æœ‰ç³»çµ±æ•´åˆ

#### 3.9.1 ActionResult æ•´åˆ

| ç¾æœ‰æ©Ÿåˆ¶ | æ•´åˆæ–¹å¼ | å‚™è¨» |
|---------|---------|------|
| `ActionResult<T>` | ä¸ä¿®æ”¹é¡å‹å®šç¾© | ç¶­æŒç¾æœ‰ API |
| `success: false` | ä½œç‚ºéŒ¯èª¤è§¸ç™¼æ¢ä»¶ | Client ç«¯æª¢æ¸¬ |
| `errorCode` | ç›´æ¥ä½¿ç”¨ | æ˜ å°„è‡³ ErrorLogEntry |
| `actionSuccess()` | ä¸è®Š | â€” |
| `actionError()` | ä¸è®Š | â€” |

> **ç›¸å®¹æ€§èªªæ˜**ï¼šéƒ¨åˆ†ç¾æœ‰ Actionsï¼ˆå¦‚ `embeddings/actions.ts`ï¼‰ä½¿ç”¨ `{ success: false, error: string }` è€Œé `{ success: false, errorCode }`ã€‚Error Log éœ€åŒæ™‚æ”¯æ´å…©ç¨®æ ¼å¼ï¼š
> - å„ªå…ˆå– `errorCode`
> - è‹¥ä¸å­˜åœ¨ï¼Œå‰‡å– `error` å­—ä¸²ï¼Œä¸¦æ¨™è¨˜ç‚º `unknown_error`ï¼ˆç­‰ç´šï¼šErrorï¼›ç”¨æ–¼è¿½è¹¤ legacy actionsï¼Œä¸¦é©…å‹•å¾ŒçºŒæ”¶æ–‚ç‚º `ActionResult`ï¼‰

#### 3.9.2 ERROR_LABELS æ•´åˆ

| ç¾æœ‰æ©Ÿåˆ¶ | æ•´åˆæ–¹å¼ |
|---------|---------|
| `ERROR_LABELS` å°ç…§è¡¨ | ç”¨æ–¼ Toast/Panel çš„è¨Šæ¯é¡¯ç¤º |
| `getErrorLabel()` | ç”¨æ–¼å–å¾—ç•¶å‰èªè¨€çš„éŒ¯èª¤è¨Šæ¯ |
| é›™èªè¨Šæ¯ | ä¾å¾Œå°ç•¶å‰èªè¨€è‡ªå‹•åˆ‡æ› |

#### 3.9.3 èªè­‰ç³»çµ±æ•´åˆ

| æ•´åˆé» | èªªæ˜ |
|-------|------|
| Session / Auth Context | è‡ªå‹•å–å¾—ç•¶å‰ä½¿ç”¨è€… Email |
| Admin Guard éŒ¯èª¤ | è‡ªå‹•è½‰æ›ç‚º Critical ç­‰ç´š |
| Token éæœŸ | é¡¯ç¤º `unauthorized` éŒ¯èª¤ |

#### 3.9.4 å¯¦ä½œå»ºè­°ï¼šErrorLogService

å»ºè­°å»ºç«‹ä¸€å€‹ç¨ç«‹çš„ ErrorLogService ä¾†ç®¡ç†éŒ¯èª¤æ—¥èªŒï¼š

**æœå‹™è·è²¬ï¼š**
- ç®¡ç†éŒ¯èª¤æ—¥èªŒçš„æ–°å¢ã€æŸ¥è©¢ã€åˆªé™¤
- ç¶­è­· sessionStorage æŒä¹…åŒ–
- æä¾›ç¯©é¸èˆ‡æœå°‹åŠŸèƒ½
- ç®¡ç†æœªè®€è¨ˆæ•¸
- è§¸ç™¼ Toast é¡¯ç¤º

**å­˜å„²ç­–ç•¥ï¼š**

| å„²å­˜ä½ç½® | ç”¨é€” | å®¹é‡é™åˆ¶ |
|---------|------|---------|
| React State (Context) | å³æ™‚ UI æ›´æ–° | 100 å‰‡ |
| sessionStorage | è·¨é é¢ä¿ç•™ | 100 å‰‡ |
| â€” | ä¸åš Server ç«¯æŒä¹…åŒ– | â€” |

**è‡ªå‹•æ¸…ç†è¦å‰‡ï¼š**
- è¶…é 100 å‰‡æ™‚ï¼Œè‡ªå‹•ç§»é™¤æœ€èˆŠçš„è¨˜éŒ„
- sessionStorage é”åˆ°å®¹é‡é™åˆ¶æ™‚ï¼Œæ¸…é™¤èˆŠè¨˜éŒ„
- ä½¿ç”¨è€…æ‰‹å‹•æ¸…é™¤æ™‚ï¼ŒåŒæ™‚æ¸…é™¤ State èˆ‡ sessionStorage

---

## å››ã€UI/UX è¨­è¨ˆåŸå‰‡

### 4.1 ä¸€è‡´æ€§è¦æ±‚

- æ‰€æœ‰æ–°å¢å…ƒä»¶éœ€ç¬¦åˆç¾æœ‰å¾Œå°è¨­è¨ˆé¢¨æ ¼ï¼ˆé…è‰²ã€å­—é«”ã€é–“è·ã€åœ“è§’ç­‰ï¼‰
- Toggle èˆ‡é¢æ¿å…ƒä»¶éœ€èˆ‡ç¾æœ‰ UI çµ„ä»¶åº«ä¸€è‡´
- å‹•ç•«æ•ˆæœç°¡æ½”ï¼Œä¸å¹²æ“¾æ­£å¸¸æ“ä½œæµç¨‹

### 4.2 éŸ¿æ‡‰å¼è¨­è¨ˆ

| å…ƒä»¶ | æ¡Œé¢ç‰ˆ | è¡Œå‹•è£ç½® |
|------|--------|---------|
| èªè¨€ Toggle | å›ºå®šé¡¯ç¤ºæ–¼å´é‚Šæ¬„ | æ”¶åˆè‡³æ¼¢å ¡é¸å–®å…§ |
| Error Toast | å³ä¸‹è§’å †ç–Š | åº•éƒ¨ç½®ä¸­ï¼Œå–®å‰‡é¡¯ç¤º |
| Error Log Panel | å³å´æ»‘å‡º 400px | å…¨è¢å¹•è¦†è“‹ |

### 4.3 ç„¡éšœç¤™æ€§ï¼ˆAccessibilityï¼‰

- æ‰€æœ‰äº’å‹•å…ƒä»¶æ”¯æ´éµç›¤æ“ä½œï¼ˆTab åˆ‡æ›ã€Enter/Space å•Ÿå‹•ï¼‰
- æä¾›é©ç•¶çš„ ARIA æ¨™ç±¤ï¼ˆ`aria-label`ã€`aria-live` ç­‰ï¼‰
- Toast ä½¿ç”¨ `role="alert"` ç¢ºä¿è¢å¹•é–±è®€å™¨èƒ½å³æ™‚è®€å‡º
- é¡è‰²å°æ¯”åº¦ç¬¦åˆ WCAG 2.1 AA æ¨™æº–
- ä¸åƒ…ä¾è³´é¡è‰²å€åˆ†éŒ¯èª¤ç­‰ç´šï¼ˆåŒæ™‚ä½¿ç”¨åœ–ç¤ºï¼‰

---

## äº”ã€æŠ€è¡“ç´„æŸèˆ‡æ•ˆèƒ½è¦æ±‚

### 5.1 æ•ˆèƒ½è¦æ±‚

| é …ç›® | è¦æ±‚ |
|------|------|
| èªè¨€åˆ‡æ›éŸ¿æ‡‰ | å°æ–¼ 100msï¼ˆä¸é‡è¼‰é é¢ï¼‰ |
| Toast æ¸²æŸ“ | ä¸é˜»å¡ä¸»ç·šç¨‹ï¼Œä½¿ç”¨éåŒæ­¥æ›´æ–° |
| Error Log Panel é–‹å•Ÿ | å°æ–¼ 200ms |
| è¨˜æ†¶é«”ä½¿ç”¨ | Error Log æœ€å¤š 100 å‰‡ï¼Œè¶…éè‡ªå‹•æ¸…é™¤èˆŠç´€éŒ„ |

### 5.2 æ¶æ§‹ç›¸å®¹æ€§

- ç›¸å®¹ç¾æœ‰ Next.js + next-intl åœ‹éš›åŒ–æ¶æ§‹
- ä¸å½±éŸ¿å‰å°ç¶²ç«™çš„èªè¨€è¨­å®šèˆ‡åˆ‡æ›
- èˆ‡ç¾æœ‰èªè­‰æˆæ¬Šæ©Ÿåˆ¶å®Œå…¨ç›¸å®¹
- éµå®ˆ `ARCHITECTURE.md` çš„åˆ†å±¤åŸå‰‡ï¼ˆä¸åœ¨ app layer ç›´æ¥æ“ä½œ DBï¼‰

### 5.3 Bundle è€ƒé‡

- Error Log ç›¸é—œå…ƒä»¶æ‡‰ä½¿ç”¨ `dynamic import` è¼‰å…¥ï¼Œé¿å…å¢åŠ åˆå§‹ bundle å¤§å°
- Toast å…ƒä»¶å¯ç´å…¥ Admin Layout é è¼‰ï¼ˆè¼•é‡ï¼‰

---

## å…­ã€é©—æ”¶æ¨™æº–

---

## å…­ã€é©—æ”¶æ¨™æº–

### 6.2 éŒ¯èª¤æ—¥èªŒé¡¯ç¤ºåŠŸèƒ½

#### Toast é€šçŸ¥ â€” åŸºæœ¬åŠŸèƒ½
- [ ] Server Action å¤±æ•—æ™‚è‡ªå‹•é¡¯ç¤º Toast
- [ ] Toast é¡¯ç¤ºæ–¼ç•«é¢å³ä¸‹è§’
- [ ] Toast é¡¯ç¤ºåš´é‡åº¦åœ–ç¤ºï¼ˆğŸ”´/ğŸŸ /ğŸŸ¡ï¼‰
- [ ] Toast é¡¯ç¤ºæ™‚é–“æˆ³è¨˜ï¼ˆHH:mm:ssï¼‰
- [ ] Toast é¡¯ç¤ºéŒ¯èª¤ä»£ç¢¼ï¼ˆå¦‚ `update_failed`ï¼‰
- [ ] Toast é¡¯ç¤ºé›™èªéŒ¯èª¤è¨Šæ¯
- [ ] Toast é¡¯ç¤ºä¾†æºæ¨¡çµ„è·¯å¾‘

#### Toast é€šçŸ¥ â€” äº’å‹•è¡Œç‚º
- [ ] é»æ“Šé—œé–‰æŒ‰éˆ•å¯ç«‹å³é—œé–‰ Toast
- [ ] Error ç­‰ç´š Toast 10 ç§’å¾Œè‡ªå‹•æ¶ˆå¤±
- [ ] Warning ç­‰ç´š Toast 6 ç§’å¾Œè‡ªå‹•æ¶ˆå¤±
- [ ] Critical ç­‰ç´š Toast ä¸è‡ªå‹•æ¶ˆå¤±
- [ ] æ»‘é¼ æ‡¸åœæ™‚æš«åœè‡ªå‹•æ¶ˆå¤±å€’æ•¸
- [ ] é»æ“Šã€Œè©³æƒ…ã€å¯å±•é–‹æ›´å¤šè³‡è¨Š
- [ ] é»æ“Šã€Œè¤‡è£½ã€å¯è¤‡è£½éŒ¯èª¤è³‡è¨Šè‡³å‰ªè²¼ç°¿
- [ ] é»æ“Šã€ŒæŸ¥çœ‹æ—¥èªŒã€å¯é–‹å•Ÿ Error Log Panel
- [ ] å¤šå‰‡éŒ¯èª¤å¯æ­£ç¢ºå †ç–Šé¡¯ç¤ºï¼ˆæœ€å¤š 5 å‰‡ï¼‰

#### Error Log Panel â€” åŸºæœ¬åŠŸèƒ½
- [ ] å´é‚Šæ¬„é¡¯ç¤º Error Log å…¥å£æŒ‰éˆ•
- [ ] å…¥å£æŒ‰éˆ•é¡¯ç¤ºæœªè®€éŒ¯èª¤æ•¸é‡ Badge
- [ ] é»æ“Šå…¥å£æŒ‰éˆ•å¾å³å´æ»‘å‡ºé¢æ¿
- [ ] é¢æ¿é¡¯ç¤ºéŒ¯èª¤ç¸½æ•¸èˆ‡æœªè®€æ•¸
- [ ] éŒ¯èª¤åˆ—è¡¨ä¾æ™‚é–“å€’åºæ’åˆ—ï¼ˆæœ€æ–°åœ¨å‰ï¼‰
- [ ] éŒ¯èª¤ä¾æ—¥æœŸåˆ†çµ„é¡¯ç¤ºï¼ˆä»Šå¤© / æ˜¨å¤©ï¼‰
- [ ] é»æ“Šé®ç½©æˆ–é—œé–‰æŒ‰éˆ•å¯é—œé–‰é¢æ¿
- [ ] æŒ‰ ESC éµå¯é—œé–‰é¢æ¿

#### Error Log Panel â€” ç¯©é¸èˆ‡æœå°‹ **(Phase 2)**
- [ ] å¯ä¾æ™‚é–“ç¯„åœç¯©é¸ï¼ˆ1 å°æ™‚ / ä»Šå¤© / 7 å¤© / å…¨éƒ¨ï¼‰
- [ ] å¯ä¾åš´é‡ç­‰ç´šç¯©é¸ï¼ˆCritical / Error / Warningï¼‰
- [ ] å¯ä¾æ¨¡çµ„ç¯©é¸ï¼ˆBlog / Shop / Gallery / Data ç­‰ï¼‰
- [ ] å¯è¼¸å…¥é—œéµå­—æœå°‹éŒ¯èª¤è¨Šæ¯æˆ–ä»£ç¢¼
- [ ] ç¯©é¸çµæœå³æ™‚æ›´æ–°
- [ ] ç„¡çµæœæ™‚é¡¯ç¤ºç©ºç‹€æ…‹æç¤º
- [ ] å¯æ¸…é™¤æ‰€æœ‰ç¯©é¸æ¢ä»¶

#### Error Log Panel â€” è©³æƒ…å±•é–‹
- [ ] é»æ“Šå–®å‰‡éŒ¯èª¤å¯å±•é–‹è©³ç´°è³‡è¨Š
- [ ] è©³æƒ…é¡¯ç¤ºå®Œæ•´æ™‚é–“æˆ³è¨˜
- [ ] è©³æƒ…é¡¯ç¤º Action åç¨±
- [ ] è©³æƒ…é¡¯ç¤º Target ID èˆ‡åç¨±
- [ ] è©³æƒ…é¡¯ç¤ºæ“ä½œè€… Email
- [ ] è©³æƒ…é¡¯ç¤ºé é¢ URL
- [ ] è©³æƒ…é¡¯ç¤ºè¼¸å…¥è³‡æ–™æ‘˜è¦ï¼ˆå·²è„«æ•ï¼‰
- [ ] è©³æƒ…é¡¯ç¤ºéŒ¯èª¤å”¯ä¸€ ID
- [ ] å±•é–‹è©³æƒ…æ™‚è‡ªå‹•æ¨™è¨˜ç‚ºå·²è®€

#### è¤‡è£½èˆ‡åŒ¯å‡º
- [ ] å–®å‰‡éŒ¯èª¤å¯è¤‡è£½ç‚ºæ ¼å¼åŒ–ç´”æ–‡å­—
- [ ] è¤‡è£½å…§å®¹åŒ…å«æ‰€æœ‰å¿…è¦æ¬„ä½
- [ ] å¯æ‰¹æ¬¡è¤‡è£½æ‰€æœ‰éŒ¯èª¤
- [ ] **(Phase 2)** å¯åŒ¯å‡ºç‚º JSON æª”æ¡ˆ
- [ ] **(Phase 2)** JSON æª”æ¡ˆå‘½åç¬¦åˆæ ¼å¼è¦æ±‚
- [ ] **(Phase 2)** JSON å…§å®¹åŒ…å«åŒ¯å‡ºè³‡è¨Šèˆ‡å®Œæ•´éŒ¯èª¤è³‡æ–™

#### éŒ¯èª¤åˆ†ç´š
- [ ] `unauthorized`ã€`forbidden` ç­‰ç‚º Critical ç­‰ç´š
- [ ] `create_failed`ã€`update_failed` ç­‰ç‚º Error ç­‰ç´š
- [ ] `rate_limited`ã€`feature_disabled` ç‚º Warning ç­‰ç´š
- [ ] ä¸åŒç­‰ç´šé¡¯ç¤ºå°æ‡‰é¡è‰²

#### è³‡æ–™ç®¡ç†
- [ ] éŒ¯èª¤è¨˜éŒ„ä¿å­˜æ–¼ sessionStorage
- [ ] è·¨é é¢ç€è¦½æ™‚éŒ¯èª¤è¨˜éŒ„ä¿ç•™
- [ ] æœ€å¤šä¿ç•™ 100 å‰‡éŒ¯èª¤è¨˜éŒ„
- [ ] è¶…é 100 å‰‡æ™‚è‡ªå‹•ç§»é™¤æœ€èˆŠè¨˜éŒ„
- [ ] å¯ä¸€éµæ¸…é™¤æ‰€æœ‰éŒ¯èª¤è¨˜éŒ„

#### é›™èªæ”¯æ´
- [ ] éŒ¯èª¤è¨Šæ¯ä¾ç•¶å‰å¾Œå°èªè¨€é¡¯ç¤º
- [ ] é¢æ¿æ¨™é¡Œèˆ‡æŒ‰éˆ•æ–‡å­—ä¾èªè¨€åˆ‡æ›
- [ ] ç¯©é¸é¸é …ä¾èªè¨€åˆ‡æ›
- [ ] ç©ºç‹€æ…‹æç¤ºä¾èªè¨€åˆ‡æ›

#### éŸ¿æ‡‰å¼è¨­è¨ˆ
- [ ] æ¡Œé¢ç‰ˆ Toast é¡¯ç¤ºæ–¼å³ä¸‹è§’
- [ ] è¡Œå‹•ç‰ˆ Toast é¡¯ç¤ºæ–¼åº•éƒ¨ç½®ä¸­
- [ ] æ¡Œé¢ç‰ˆé¢æ¿å¯¬åº¦ç´„ 450px
- [ ] è¡Œå‹•ç‰ˆé¢æ¿ç‚ºå…¨è¢å¹•
- [ ] è¡Œå‹•ç‰ˆå¯å‘å³æ»‘å‹•é—œé–‰ Toast

#### ç„¡éšœç¤™æ€§
- [ ] Toast ä½¿ç”¨ `role="alert"` å±¬æ€§
- [ ] æ‰€æœ‰äº’å‹•å…ƒä»¶å¯é€ééµç›¤æ“ä½œ
- [ ] æä¾›é©ç•¶çš„ ARIA æ¨™ç±¤
- [ ] é¡è‰²å°æ¯”åº¦ç¬¦åˆ WCAG 2.1 AA æ¨™æº–

---

### 6.3 Phase 2 é©—æ”¶æ¨™æº–ï¼ˆç¯©é¸/æœå°‹/åŒ¯å‡ºï¼‰

#### ç¯©é¸åŠŸèƒ½
- [ ] æ™‚é–“ç¯„åœç¯©é¸å™¨æ­£å¸¸é‹ä½œï¼ˆ1 å°æ™‚ / ä»Šå¤© / æ˜¨å¤© / 7 å¤© / å…¨éƒ¨ï¼‰
- [ ] ç­‰ç´šç¯©é¸å™¨æ­£å¸¸é‹ä½œï¼ˆCritical / Error / Warning / å…¨éƒ¨ï¼‰
- [ ] æ¨¡çµ„ç¯©é¸å™¨æ­£å¸¸é‹ä½œï¼ˆBlog / Shop / Gallery / Data / Settings / Usersï¼‰
- [ ] å¤šé‡ç¯©é¸å¯æ­£ç¢ºçµ„åˆï¼ˆå¦‚ï¼šä»Šå¤© + Error + Blogï¼‰
- [ ] ç¯©é¸çµæœå³æ™‚æ›´æ–°ï¼Œç„¡éœ€æ‰‹å‹•åˆ·æ–°
- [ ] ç„¡çµæœæ™‚é¡¯ç¤ºå°æ‡‰ç©ºç‹€æ…‹æç¤º
- [ ] ã€Œæ¸…é™¤ç¯©é¸ã€æŒ‰éˆ•å¯é‡ç½®æ‰€æœ‰ç¯©é¸æ¢ä»¶

#### æœå°‹åŠŸèƒ½
- [ ] æœå°‹æ¡†æ”¯æ´å³æ™‚æœå°‹ï¼ˆdebounce 300msï¼‰
- [ ] å¯æœå°‹éŒ¯èª¤è¨Šæ¯æ–‡å­—
- [ ] å¯æœå°‹éŒ¯èª¤ä»£ç¢¼ï¼ˆå¦‚ `update_failed`ï¼‰
- [ ] å¯æœå°‹ Target ID
- [ ] æœå°‹ä¸å€åˆ†å¤§å°å¯«
- [ ] æœå°‹å¯èˆ‡ç¯©é¸æ¢ä»¶çµ„åˆä½¿ç”¨
- [ ] æ¸…ç©ºæœå°‹æ¡†å¯é‚„åŸå®Œæ•´åˆ—è¡¨

#### JSON åŒ¯å‡º
- [ ] ã€ŒåŒ¯å‡º JSONã€æŒ‰éˆ•å¯è§¸ç™¼æª”æ¡ˆä¸‹è¼‰
- [ ] æª”åæ ¼å¼æ­£ç¢ºï¼š`error-log-{YYYYMMDD}-{HHmmss}.json`
- [ ] JSON åŒ…å« `exportInfo`ï¼ˆæ™‚é–“ã€ç¸½æ•¸ã€ç¯©é¸æ¢ä»¶ï¼‰
- [ ] JSON åŒ…å«å®Œæ•´ `errors` é™£åˆ—
- [ ] åŒ¯å‡ºç¯„åœå°Šé‡ç•¶å‰ç¯©é¸/æœå°‹æ¢ä»¶
- [ ] ç©ºçµæœæ™‚åŒ¯å‡ºç©ºé™£åˆ—ï¼ˆä¸å ±éŒ¯ï¼‰

---

### 6.4 Phase 3 é©—æ”¶æ¨™æº–ï¼ˆé€²éšéŒ¯èª¤æ””æˆªï¼‰

#### API Route éŒ¯èª¤æ””æˆª
- [ ] é Server Action çš„ API å‘¼å«å¤±æ•—æ™‚å¯æ””æˆª
- [ ] Response status >= 400 æ™‚è§¸ç™¼ Error Log
- [ ] æ­£ç¢ºè§£æ API å›å‚³çš„ `error` / `code` / `message`
- [ ] ä¸æ””æˆªé æœŸä¸­çš„ 4xxï¼ˆå¦‚ 404 æŸ¥ç„¡è³‡æ–™ï¼‰

#### ç¶²è·¯éŒ¯èª¤æ””æˆª
- [ ] `fetch` å¤±æ•—æ™‚å¯æ””æˆªï¼ˆå¦‚ `TypeError: Failed to fetch`ï¼‰
- [ ] è«‹æ±‚é€¾æ™‚æ™‚å¯æ””æˆª
- [ ] ç¶²è·¯ä¸­æ–·æ™‚å¯æ””æˆª
- [ ] éŒ¯èª¤è¨Šæ¯é¡¯ç¤ºã€Œç¶²è·¯é€£ç·šå¤±æ•—ã€æˆ–é¡ä¼¼æç¤º

#### è·¨åˆ†é åŒæ­¥ï¼ˆå¯é¸ï¼‰
- [ ] ä½¿ç”¨ BroadcastChannel API åŒæ­¥éŒ¯èª¤è¨˜éŒ„
- [ ] æ–°åˆ†é é–‹å•Ÿæ™‚å¯å–å¾—æ—¢æœ‰éŒ¯èª¤è¨˜éŒ„
- [ ] ä¸€å€‹åˆ†é æ–°å¢éŒ¯èª¤æ™‚ï¼Œå…¶ä»–åˆ†é å¯å³æ™‚æ›´æ–°
- [ ] æ¸…é™¤è¨˜éŒ„æ™‚åŒæ­¥æ¸…é™¤æ‰€æœ‰åˆ†é 

#### Error Boundary æ•´åˆ
- [ ] React Error Boundary æ•ç²çš„éŒ¯èª¤å¯è¨˜éŒ„
- [ ] éŒ¯èª¤è¨Šæ¯åŒ…å« Component Stackï¼ˆè„«æ•å¾Œï¼‰
- [ ] ä¸å½±éŸ¿ Error Boundary åŸæœ‰çš„ fallback UI
- [ ] é¿å…è¨˜éŒ„ç¬¬ä¸‰æ–¹å¥—ä»¶çš„éé—œéµéŒ¯èª¤

---

---

## ä¸ƒã€æ’é™¤ç¯„åœ

ä»¥ä¸‹é …ç›®ä¸åœ¨æœ¬æ¬¡è¦æ ¼ç¯„åœå…§ï¼š

- å‰å°ç¶²ç«™çš„èªè¨€åˆ‡æ›åŠŸèƒ½
- éŒ¯èª¤æ—¥èªŒçš„ä¼ºæœå™¨ç«¯æŒä¹…åŒ–å„²å­˜
- éŒ¯èª¤ç™¼ç”Ÿæ™‚çš„ Email / Slack / Webhook é€šçŸ¥
- è‡ªå‹•éŒ¯èª¤å›å ±è‡³å¤–éƒ¨ç›£æ§æœå‹™ï¼ˆå¦‚ Sentryï¼‰
- éŒ¯èª¤åˆ†æçµ±è¨ˆå ±è¡¨
- å¤šèªè¨€æ“´å……ï¼ˆæ—¥æ–‡ã€éŸ“æ–‡ç­‰ï¼‰

---

## å…«ã€é™„éŒ„

### é™„éŒ„ Aï¼šå®Œæ•´éŒ¯èª¤ä»£ç¢¼å°ç…§è¡¨

ä»¥ä¸‹ç‚ºç¾æœ‰ `API_ERROR_CODES` èˆ‡ `ADMIN_ERROR_CODES` çš„å®Œæ•´å°ç…§ï¼š

#### A.1 é€šç”¨éŒ¯èª¤ä»£ç¢¼ (API_ERROR_CODES)

| éŒ¯èª¤ä»£ç¢¼ | ç­‰ç´š | è‹±æ–‡è¨Šæ¯ | ä¸­æ–‡è¨Šæ¯ |
|---------|:----:|---------|---------|
| `unauthorized` | Critical | Please log in to continue | è«‹å…ˆç™»å…¥ |
| `forbidden` | Critical | Permission denied | æ¬Šé™ä¸è¶³ |
| `not_found` | Error | Resource not found | æ‰¾ä¸åˆ°è³‡æº |
| `validation_error` | Error | Invalid input | è¼¸å…¥æ ¼å¼éŒ¯èª¤ |
| `rate_limited` | Warning | Too many requests, please try again later | è«‹æ±‚éæ–¼é »ç¹ï¼Œè«‹ç¨å¾Œå†è©¦ |
| `internal_error` | Critical | An unexpected error occurred | ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ |
| `feature_disabled` | Warning | This feature is currently disabled | æ­¤åŠŸèƒ½ç›®å‰å·²åœç”¨ |

#### A.2 å•†åŸç›¸é—œéŒ¯èª¤ä»£ç¢¼

| éŒ¯èª¤ä»£ç¢¼ | ç­‰ç´š | è‹±æ–‡è¨Šæ¯ | ä¸­æ–‡è¨Šæ¯ |
|---------|:----:|---------|---------|
| `product_not_found` | Error | Product not found | æ‰¾ä¸åˆ°å•†å“ |
| `variant_not_found` | Error | Product variant not found | æ‰¾ä¸åˆ°å•†å“è¦æ ¼ |
| `out_of_stock` | Warning | Item is out of stock | å•†å“ç¼ºè²¨ä¸­ |
| `not_visible` | Error | Item is not available | å•†å“ä¸å¯è³¼è²· |
| `invalid_items` | Error | Invalid items in cart | è³¼ç‰©è»Šä¸­æœ‰ç„¡æ•ˆå•†å“ |

#### A.3 ç•™è¨€ç›¸é—œéŒ¯èª¤ä»£ç¢¼

| éŒ¯èª¤ä»£ç¢¼ | ç­‰ç´š | è‹±æ–‡è¨Šæ¯ | ä¸­æ–‡è¨Šæ¯ |
|---------|:----:|---------|---------|
| `comment_not_found` | Error | Comment not found | æ‰¾ä¸åˆ°ç•™è¨€ |
| `comment_spam` | Warning | Comment detected as spam | ç•™è¨€è¢«åˆ¤å®šç‚ºåƒåœ¾è¨Šæ¯ |
| `report_throttled` | Warning | Please wait before submitting another report | è«‹ç¨å¾Œå†æäº¤èˆ‰å ± |
| `invalid_report_type` | Error | Invalid report type | ç„¡æ•ˆçš„èˆ‰å ±é¡å‹ |

#### A.4 ç®¡ç†å¾Œå°å°ˆç”¨éŒ¯èª¤ä»£ç¢¼ (ADMIN_ERROR_CODES)

| éŒ¯èª¤ä»£ç¢¼ | ç­‰ç´š | è‹±æ–‡è¨Šæ¯ | ä¸­æ–‡è¨Šæ¯ |
|---------|:----:|---------|---------|
| `owner_required` | Critical | Owner permission required | éœ€è¦æ“æœ‰è€…æ¬Šé™ |
| `create_failed` | Error | Failed to create | å»ºç«‹å¤±æ•— |
| `update_failed` | Error | Failed to update | æ›´æ–°å¤±æ•— |
| `delete_failed` | Error | Failed to delete | åˆªé™¤å¤±æ•— |
| `slug_duplicate` | Error | This slug is already in use | æ­¤ç¶²å€ä»£ç¨±å·²è¢«ä½¿ç”¨ |
| `category_has_posts` | Error | Category contains posts, cannot delete | åˆ†é¡ä¸‹æœ‰æ–‡ç« ï¼Œç„¡æ³•åˆªé™¤ |
| `resource_in_use` | Error | Resource is in use | è³‡æºä½¿ç”¨ä¸­ |

---

### é™„éŒ„ Bï¼šæ¨¡çµ„èˆ‡ URL å°æ‡‰è¡¨

| æ¨¡çµ„ | å­æ¨¡çµ„ | URL Pattern | ç›¸é—œ Actions |
|------|--------|-------------|-------------|
| Blog | Posts | `/admin/posts/*` | createPostAction, updatePostAction, deletePostAction |
| Blog | Categories | `/admin/categories/*` | createCategory, updateCategory, deleteCategory |
| Blog | Comments | `/admin/comments/*` | approveComment, rejectComment, deleteComment |
| Shop | Dashboard | `/admin/shop` | â€” |
| Shop | Products | `/admin/shop/products/*` | createProduct, updateProduct, deleteProduct |
| Shop | Orders | `/admin/shop/orders/*` | updateOrderStatus, refundOrder |
| Shop | Coupons | `/admin/shop/coupons/*` | createCoupon, updateCoupon, deleteCoupon |
| Shop | Members | `/admin/shop/members/*` | updateMember |
| Shop | Access | `/admin/shop/access/*` | updateAccess |
| Shop | Settings | `/admin/shop/settings/*` | updateShopSettings |
| Shop | Payments | `/admin/shop/payments/*` | updatePaymentSettings |
| Gallery | Gallery | `/admin/gallery` | uploadGalleryItem, deleteGalleryItem |
| Gallery | Categories | `/admin/gallery/categories/*` | createGalleryCategory, deleteGalleryCategory |
| Gallery | Featured | `/admin/gallery/featured/*` | updateFeatured |
| Data | Embeddings | `/admin/embeddings/*` | initializeAllEmbeddingsAction, retryFailedEmbeddingsAction |
| Data | Preprocessing | `/admin/preprocessing/*` | updatePreprocessingConfig |
| Data | AI Analysis | `/admin/ai-analysis/*` | generateAIReport |
| Data | Control Center | `/admin/control-center/*` | â€” |
| Data | Import/Export | `/admin/import-export/*` | importData, exportData |
| Settings | Settings | `/admin/settings/*` | updateSiteSettings |
| Settings | Theme | `/admin/theme/*` | updateTheme, updateFonts |
| Settings | Features | `/admin/features/*` | updateFeatures |
| Content | Content | `/admin/content/*` | updateContent |
| Content | Landing | `/admin/landing/*` | updateLandingSection |
| Content | Portfolio | `/admin/portfolio/*` | updatePortfolio |
| Users | Users | `/admin/users/*` | updateUserRole, updateUserNotes |
| History | History | `/admin/history/*` | â€” |
| Reports | Reports | `/admin/reports/*` | â€” |

---

### é™„éŒ„ Cï¼šErrorLogEntry å®Œæ•´æ¬„ä½èªªæ˜

```
ErrorLogEntry {
  // === è­˜åˆ¥è³‡è¨Š ===
  id: string                    // å”¯ä¸€è­˜åˆ¥ç¢¼ï¼Œæ ¼å¼ï¼šerr_{YYYYMMDD}_{HHmmss}_{random}

  // === æ™‚é–“è³‡è¨Š ===
  timestamp: string             // ISO 8601 æ ¼å¼ï¼Œå¦‚ "2026-01-01T14:30:45.123Z"

  // === éŒ¯èª¤è³‡è¨Š ===
  errorCode: ActionErrorCode | "unknown_error"    // éŒ¯èª¤ä»£ç¢¼ï¼Œå¦‚ "update_failed"ï¼ˆlegacy fallback: "unknown_error"ï¼‰
  severity: Severity            // "critical" | "error" | "warning"

  // === ä¾†æºè³‡è¨Š ===
  module: string                // ä¸»æ¨¡çµ„ï¼Œå¦‚ "Blog"
  subModule?: string            // å­æ¨¡çµ„ï¼Œå¦‚ "Posts"
  action: string                // Action åç¨±ï¼Œå¦‚ "updatePostAction"
  url: string                   // é é¢ URLï¼Œå¦‚ "/zh/admin/posts/abc123/edit"

  // === æ“ä½œå°è±¡ ===
  targetType?: string           // å°è±¡é¡å‹ï¼Œå¦‚ "post"
  targetId?: string             // å°è±¡ IDï¼Œå¦‚ "post_abc123"
  targetName?: string           // å°è±¡åç¨±ï¼Œå¦‚ "æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« "

  // === ä½¿ç”¨è€…è³‡è¨Š ===
  userEmail?: string            // æ“ä½œè€… Emailï¼Œå¦‚ "admin@example.com"
  locale: "en" | "zh"           // ä»‹é¢èªè¨€

  // === è¼¸å…¥è³‡æ–™ ===
  inputSummary?: object         // è¼¸å…¥è³‡æ–™æ‘˜è¦ï¼ˆå·²è„«æ•ï¼‰
  additionalInfo?: object       // å…¶ä»–é™„åŠ è³‡è¨Š

  // === ç‹€æ…‹ ===
  isRead: boolean               // æ˜¯å¦å·²è®€
}
```

---

### é™„éŒ„ Dï¼šç›¸é—œæ–‡ä»¶ç´¢å¼•

| æ–‡ä»¶ | è·¯å¾‘ | èªªæ˜ |
|------|------|------|
| ç³»çµ±æ¶æ§‹è¦ç¯„ | `ARCHITECTURE.md` | æ•´é«”æ¶æ§‹åŸå‰‡èˆ‡åˆ†å±¤è¦ç¯„ |
| æ•ˆèƒ½æ”¹å–„æ‰‹å†Š | `doc/archive/2025-12-31-admin-performance-archive.md` | å¾Œå°è¼‰å…¥æ•ˆèƒ½å„ªåŒ–æ–¹æ¡ˆ |
| éŒ¯èª¤é¡å‹å®šç¾© | `lib/types/action-result.ts` | ActionResultã€ERROR_LABELS å®šç¾© |
| API éŒ¯èª¤ä»£ç¢¼ | `lib/types/api-error.ts` | API_ERROR_CODES å®šç¾© |
| èªè­‰å®ˆè¡› | `lib/modules/auth/admin-guard.ts` | requireSiteAdminã€requireOwner |
| è‹±æ–‡ç¿»è­¯æª” | `messages/en.json` | å‰å°è‹±æ–‡ç¿»è­¯ |
| ä¸­æ–‡ç¿»è­¯æª” | `messages/zh.json` | å‰å°ä¸­æ–‡ç¿»è­¯ |
| Admin Sidebar | `components/admin/common/AdminSidebar.tsx` | å´é‚Šæ¬„å…ƒä»¶ |
| Admin Tabs | `components/admin/common/AdminTabs.tsx` | Tab å…ƒä»¶ |

---

### é™„éŒ„ Eï¼šè¡“èªè¡¨

| è¡“èª | èªªæ˜ |
|------|------|
| **Toast** | çŸ­æš«é¡¯ç¤ºæ–¼ç•«é¢è§’è½çš„é€šçŸ¥è¨Šæ¯å…ƒä»¶ |
| **Drawer / Panel** | å¾ç•«é¢é‚Šç·£æ»‘å…¥çš„å´é‚Šé¢æ¿ |
| **Badge** | é¡¯ç¤ºæ•¸å­—è¨ˆæ•¸çš„å°æ¨™ç±¤ï¼Œå¸¸ç”¨æ–¼æœªè®€é€šçŸ¥ |
| **ActionResult** | Server Action çš„çµ±ä¸€å›å‚³é¡å‹ |
| **ErrorCode** | æ©Ÿå™¨å¯è®€çš„éŒ¯èª¤è­˜åˆ¥ä»£ç¢¼ |
| **Severity** | éŒ¯èª¤åš´é‡ç¨‹åº¦ç­‰ç´š |
| **sessionStorage** | ç€è¦½å™¨æä¾›çš„ Session ç´šåˆ¥å„²å­˜ç©ºé–“ |
| **è„«æ•** | ç§»é™¤æˆ–é®è”½æ•æ„Ÿè³‡è¨Šçš„è™•ç†ç¨‹åº |
| **FIFO** | First In First Outï¼Œå…ˆé€²å…ˆå‡ºçš„è³‡æ–™çµæ§‹ |
| **WCAG** | Web Content Accessibility Guidelinesï¼Œç¶²é å…§å®¹ç„¡éšœç¤™æŒ‡å— |

---

## ç›¸é—œæ–‡ä»¶

- Constraints: `../../../ARCHITECTURE.md`
- Implemented behavior (SSoT): `../../SPEC.md`
- Security policies: `../../SECURITY.md`
- Ops / verification: `../../RUNBOOK.md`
- Drift tracker: `../../../uiux_refactor.md`
